# Data Model: PocketBase Todo Showcase

**Branch**: `001-pocketbase-todo` | **Date**: 2026-02-19

---

## PocketBase Collection: `todos`

### Fields

| Field       | PocketBase Type | Required | Constraints          | Notes                              |
|-------------|-----------------|----------|----------------------|------------------------------------|
| `id`        | Text (auto)     | —        | 15-char unique ID    | Auto-generated by PocketBase       |
| `created`   | DateTime (auto) | —        | —                    | Auto-set on create by PocketBase   |
| `updated`   | DateTime (auto) | —        | —                    | Auto-set on update by PocketBase   |
| `title`     | Text            | Yes      | Max length: 200      | The todo task description          |
| `completed` | Bool            | Yes      | Default: `false`     | Completion state                   |

### API Rules

All rules set to `""` (empty string) — publicly accessible with no authentication required. This matches the spec assumption that todos are shared and visible to anyone.

| Rule   | Value | Meaning              |
|--------|-------|----------------------|
| List   | `""`  | Anyone can list      |
| View   | `""`  | Anyone can view one  |
| Create | `""`  | Anyone can create    |
| Update | `""`  | Anyone can update    |
| Delete | `""`  | Anyone can delete    |

### Lifecycle / State Transitions

```
[created: false] ──toggle──> [completed: true]
[completed: true] ──toggle──> [created: false]
[any] ──delete──> [gone]
```

### Ordering

Records are fetched sorted by `created` descending (`sort: '-created'`), so the newest todo appears first. FR-001.

---

## Angular TypeScript Interface

```typescript
// src/app/todo/todo.ts (or inline in todo.service.ts)
export interface Todo {
  id: string;
  title: string;
  completed: boolean;
  created: string;   // ISO 8601 DateTime string from PocketBase
  updated: string;   // ISO 8601 DateTime string from PocketBase
}
```

---

## Migration

Defined in `pocketbase/pb_migrations/1_create_todos.js`. Applied automatically by PocketBase on startup.

```javascript
migrate((app) => {
  const collection = new Collection({
    name: 'todos',
    type: 'base',
    listRule: '',
    viewRule: '',
    createRule: '',
    updateRule: '',
    deleteRule: '',
    fields: [
      { name: 'title',     type: 'text', required: true,  options: { max: 200 } },
      { name: 'completed', type: 'bool', required: false, options: { } },
    ],
  });
  app.save(collection);
}, (app) => {
  const collection = app.findCollectionByNameOrId('todos');
  app.delete(collection);
});
```
